version: '3.8'

services:
  tournament-app:
    build: .
    container_name: tournament_server
    restart: always
    ports:
      - "5000:5000"
    volumes:
      # 1. Die Datenbank persistent speichern
      # Achtung: Die Datei tournament.db muss auf dem Host existieren!
      - ./tournament.db:/app/tournament.db
      
      # 2. Die Map-Bilder persistent speichern
      # Pfad auf Host : Pfad im Container
      - ./app/static/map_images:/app/app/static/map_images
    environment:
      - FLASK_APP=run.py
      - FLASK_ENV=production
      # Zeitzone setzen (optional, aber gut f√ºr Logs)
      - TZ=Europe/Berlin